!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){new class{constructor(){this.initialize()}initialize(){this.api="https://api.myjson.com/bins/kez8a",this.appStore={},this.noOfJobjs=0,this.experienceList=[],this.locationList=[],this.searchReult=[],this.$el=$(".main-wrapper"),this.events(),this.getApiData()}events(){let e=this;$("#js-getApps").on("click",function(){e.getApiData()}),$("a.app-card").on("click",function(t){t.preventDefault();let n=$(this).attr("data-href");console.log(e.getAppsById(n))}),$("#job-search-form").on("submit",function(t){t.preventDefault();let n=e.$el.find("#js-experience").val(),a=e.$el.find("#js-location").val(),i=e.$el.find("#js-search").val();e.jobSearch(n,a,i)}),$("#js-location--filter, #js-sort-by").on("click",function(){let t=$(this).data("type");e.jobSorting(t)})}getApiData(){let e=this;$.getJSON(this.api,function(t){e.appStore=t.jobsfeed,e.renderApps()})}renderApps(){this.renderComponents(),this.appCardTemplate(this.appStore)}renderComponents(){let e=this;$.each(this.appStore,function(t,n){e.uniqueDataPush(e.experienceList,n.experience),e.uniqueDataPush(e.locationList,n.location)}),this.renderSearchItems($("#js-experience")," - Experience - ",this.experienceList.sort((e,t)=>e-t)),this.renderSearchItems($("#js-location")," - Location - ",this.locationList.sort()),this.$el.find("#js-total-result").html(this.appStore.length)}uniqueDataPush(e,t){$.inArray(t,e)<0?e.push(t):e.splice($.inArray(t,e),1)}renderSearchItems(e,t,n){let a=`<option value="">${t}</option>`;$.each(n,function(e,t){a+=`<option value="${t}">${t}</option>`}),e.html(a)}templateEmptyCheck(e,t){return e?t:""}appCardTemplate(e){let t="",n=this;e&&e.length?$.each(e,function(e,a){t+=`<div class="col-xs-12 col-md-6 mb-3">\n                                <a href="${a.applyink}" class="job-card__box bg-white">\n                                    <div class="job-card__box--title">\n                                        ${n.templateEmptyCheck(a.title,`<h4 class="float-left">${a.title}</h4>`)}\n                                        ${n.templateEmptyCheck(a.salary,`<label class="badge badge-light">${a.salary}</label>`)}\n                                        ${n.templateEmptyCheck(a.type,`<span class="badge badge-light">${a.type}</span>`)}\n                                    </div>\n                                    <div class="job-card__box--company">\n                                        ${n.templateEmptyCheck(a.companyname,`<label><img src="assets/img/three-buildings.svg" alt="Office"> ${a.companyname}</label>`)}\n                                        ${n.templateEmptyCheck(a.location,`<label><img src="assets/img/location-pointer.svg" alt="Office"> ${a.location}</label>`)}\n                                    </div>\n                                    <div class="job-card__box--date">\n                                        ${n.templateEmptyCheck(a.salary,`<label>Start: <span>${a.startdate}</span></label> -`)}\n                                        ${n.templateEmptyCheck(a.salary,`<label>End: <span>${a.startdate}</span></label>`)}\n                                    </div>\n                                    <div class="job-card__box--others">\n                                        ${n.templateEmptyCheck(a.salary,`<label>Source: ${a.source}</label>`)}\n                                        <button href="${a.applyink}" title="Apply" class="btn btn-sm btn-success float-right">Apply</button>\n                                    </div>\n                                </a>\n                            </div>`}):t+='<div class="col-xs-12 col-md-12 text-center mb-3"><h4>No Jobs Found!</h4></div>',$(".job-card__results").empty().html(t)}findItem(e,t){for(var n=[],a=0;a<e.length;a++){var i=e[a];for(var r in i)if(i[r].toString().toLowerCase().indexOf(t)>-1){n.push(i);break}}return n}jobSearch(e,t,n){let a=this,i=this.appStore,r=[];this.searchReult=[],e&&r.length>0?r=r.filter(function(t){return t.experience==e}):e&&(r=i.filter(function(t){return t.experience==e})),r.length>0&&t?r=r.filter(function(e){return e.location==t}):t&&(r=i.filter(function(e){return e.location==t})),r.length&&n?r=a.findItem(r,n):0===r.length&&(r=a.findItem(i,n)),this.searchReult=r,a.renderJobSearchResult(r)}renderJobSearchResult(e){this.$el.find("#js-total-result").html(e.length),this.appCardTemplate(e)}jobSorting(e){let t=this.searchReult&&this.searchReult.length?this.searchReult:this.appStore;"location"==e&&(t=t.sort((e,t)=>e.location!==t.location?e.location<t.location?-1:1:0)),"experience"==e&&(t=t.sort((e,t)=>parseInt(e.experience)-parseInt(t.experience))),this.renderJobSearchResult(t)}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Fzc2V0cy9qcy9tYWluLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiW29iamVjdCBPYmplY3RdIiwidGhpcyIsImluaXRpYWxpemUiLCJhcGkiLCJhcHBTdG9yZSIsIm5vT2ZKb2JqcyIsImV4cGVyaWVuY2VMaXN0IiwibG9jYXRpb25MaXN0Iiwic2VhcmNoUmV1bHQiLCIkZWwiLCIkIiwiZXZlbnRzIiwiZ2V0QXBpRGF0YSIsInNlbGYiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInNlbGVjdGVkQXBwSWQiLCJhdHRyIiwiY29uc29sZSIsImxvZyIsImdldEFwcHNCeUlkIiwiZXhwZXJpZW5jZSIsImZpbmQiLCJ2YWwiLCJsb2NhdGlvbiIsInNlcmFjaFRlcm0iLCJqb2JTZWFyY2giLCJ0eXBlIiwiZGF0YSIsImpvYlNvcnRpbmciLCJnZXRKU09OIiwianNvbiIsImpvYnNmZWVkIiwicmVuZGVyQXBwcyIsInJlbmRlckNvbXBvbmVudHMiLCJhcHBDYXJkVGVtcGxhdGUiLCJlYWNoIiwiZiIsInVuaXF1ZURhdGFQdXNoIiwicmVuZGVyU2VhcmNoSXRlbXMiLCJzb3J0IiwiYSIsImIiLCJodG1sIiwibGVuZ3RoIiwiZmlsdGVycyIsIm5ld0ZpbHRlciIsImluQXJyYXkiLCJwdXNoIiwic3BsaWNlIiwiJHRhcmdldCIsInBsYWNlaG9sZGVyIiwiX3RlbXBsYXRlIiwidGVtcGxhdGUiLCJhcHBseWluayIsInRlbXBsYXRlRW1wdHlDaGVjayIsInRpdGxlIiwic2FsYXJ5IiwiY29tcGFueW5hbWUiLCJzdGFydGRhdGUiLCJzb3VyY2UiLCJlbXB0eSIsImFyciIsInRlcm0iLCJpdGVtcyIsIml0ZW0iLCJwcm9wIiwidG9TdHJpbmciLCJ0b0xvd2VyQ2FzZSIsImluZGV4T2YiLCJyZXN1bHQiLCJmaWx0ZXIiLCJqb2IiLCJmaW5kSXRlbSIsInJlbmRlckpvYlNlYXJjaFJlc3VsdCIsInBhcnNlSW50Il0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFFBQUEsSUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsWUFBQSxDQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQXJCLEVBQUFx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biBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIi8qKlxuICogSm9iIFNlYXJjaCBBcHBcbiAqL1xuXG5jbGFzcyBKb2JTZWFyY2hBcHAge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKVxuICAgIH1cblxuICAgIGluaXRpYWxpemUoKSB7XG4gICAgICAgIHRoaXMuYXBpID0gJ2h0dHBzOi8vYXBpLm15anNvbi5jb20vYmlucy9rZXo4YSc7XG4gICAgICAgIHRoaXMuYXBwU3RvcmUgPSB7fTtcbiAgICAgICAgdGhpcy5ub09mSm9ianMgPSAwO1xuICAgICAgICB0aGlzLmV4cGVyaWVuY2VMaXN0ID0gW107XG4gICAgICAgIHRoaXMubG9jYXRpb25MaXN0ID0gW107XG4gICAgICAgIHRoaXMuc2VhcmNoUmV1bHQgPSBbXTtcbiAgICAgICAgdGhpcy4kZWwgPSAkKCcubWFpbi13cmFwcGVyJyk7XG5cbiAgICAgICAgLy9FdmVudHNcbiAgICAgICAgdGhpcy5ldmVudHMoKTtcblxuICAgICAgICAvL2luaXRcbiAgICAgICAgdGhpcy5nZXRBcGlEYXRhKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXIgRXZlbnRzXG4gICAgICovXG4gICAgZXZlbnRzKCkge1xuICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XG4gICAgICAgICQoXCIjanMtZ2V0QXBwc1wiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYuZ2V0QXBpRGF0YSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKFwiYS5hcHAtY2FyZFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBsZXQgc2VsZWN0ZWRBcHBJZCA9ICQodGhpcykuYXR0cihcImRhdGEtaHJlZlwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHNlbGYuZ2V0QXBwc0J5SWQoc2VsZWN0ZWRBcHBJZCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL2pvYiBzZXJhY2hcbiAgICAgICAgJChcIiNqb2Itc2VhcmNoLWZvcm1cIikub24oXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGxldCBleHBlcmllbmNlID0gc2VsZi4kZWwuZmluZChcIiNqcy1leHBlcmllbmNlXCIpLnZhbCgpO1xuICAgICAgICAgICAgbGV0IGxvY2F0aW9uID0gc2VsZi4kZWwuZmluZChcIiNqcy1sb2NhdGlvblwiKS52YWwoKTtcbiAgICAgICAgICAgIGxldCBzZXJhY2hUZXJtID0gc2VsZi4kZWwuZmluZChcIiNqcy1zZWFyY2hcIikudmFsKCk7XG4gICAgICAgICAgICBzZWxmLmpvYlNlYXJjaChleHBlcmllbmNlLCBsb2NhdGlvbiwgc2VyYWNoVGVybSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vc29ydCBieVxuICAgICAgICAkKCcjanMtbG9jYXRpb24tLWZpbHRlciwgI2pzLXNvcnQtYnknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsZXQgdHlwZSA9ICQodGhpcykuZGF0YSgndHlwZScpO1xuICAgICAgICAgICAgc2VsZi5qb2JTb3J0aW5nKHR5cGUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgZGF0YSBmcm9tIEFQSVxuICAgICAqL1xuICAgIGdldEFwaURhdGEoKSB7XG4gICAgICAgIGxldCBzZWxmID0gdGhpcztcbiAgICAgICAgJC5nZXRKU09OKHRoaXMuYXBpLCBmdW5jdGlvbiAoanNvbikge1xuICAgICAgICAgICAgc2VsZi5hcHBTdG9yZSA9IGpzb24uam9ic2ZlZWQ7XG4gICAgICAgICAgICBzZWxmLnJlbmRlckFwcHMoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVyIEFwcHNcbiAgICAgKi9cbiAgICByZW5kZXJBcHBzKCkge1xuICAgICAgICB0aGlzLnJlbmRlckNvbXBvbmVudHMoKTtcbiAgICAgICAgdGhpcy5hcHBDYXJkVGVtcGxhdGUodGhpcy5hcHBTdG9yZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVyIHN0YXRpYyBjb21wb25lbnRzXG4gICAgICovXG4gICAgcmVuZGVyQ29tcG9uZW50cygpIHtcbiAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgICAgICAkLmVhY2godGhpcy5hcHBTdG9yZSwgZnVuY3Rpb24gKGksIGYpIHtcbiAgICAgICAgICAgIHNlbGYudW5pcXVlRGF0YVB1c2goc2VsZi5leHBlcmllbmNlTGlzdCwgZi5leHBlcmllbmNlKTtcbiAgICAgICAgICAgIHNlbGYudW5pcXVlRGF0YVB1c2goc2VsZi5sb2NhdGlvbkxpc3QsIGYubG9jYXRpb24pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL3JlbmRlciBzdGF0aWMgY29tcG9uZW50c1xuICAgICAgICB0aGlzLnJlbmRlclNlYXJjaEl0ZW1zKCQoXCIjanMtZXhwZXJpZW5jZVwiKSwgJyAtIEV4cGVyaWVuY2UgLSAnLCB0aGlzLmV4cGVyaWVuY2VMaXN0LnNvcnQoKGEsIGIpID0+IGEgLSBiKSk7XG4gICAgICAgIHRoaXMucmVuZGVyU2VhcmNoSXRlbXMoJChcIiNqcy1sb2NhdGlvblwiKSwgJyAtIExvY2F0aW9uIC0gJywgdGhpcy5sb2NhdGlvbkxpc3Quc29ydCgpKTtcblxuICAgICAgICB0aGlzLiRlbC5maW5kKCcjanMtdG90YWwtcmVzdWx0JykuaHRtbCh0aGlzLmFwcFN0b3JlLmxlbmd0aCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHVzaCB1bmlxdWUgaXRlbSB0byBhcnJheVxuICAgICAqIEBwYXJhbSBmaWx0ZXJzXG4gICAgICogQHBhcmFtIG5ld0ZpbHRlclxuICAgICAqL1xuICAgIHVuaXF1ZURhdGFQdXNoKGZpbHRlcnMsIG5ld0ZpbHRlcikge1xuICAgICAgICBpZiAoJC5pbkFycmF5KG5ld0ZpbHRlciwgZmlsdGVycykgPCAwKSB7XG4gICAgICAgICAgICBmaWx0ZXJzLnB1c2gobmV3RmlsdGVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZpbHRlcnMuc3BsaWNlKCQuaW5BcnJheShuZXdGaWx0ZXIsIGZpbHRlcnMpLCAxKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0YXRpYyBjb21wb25lbnRzIHRlbXBsYXRlXG4gICAgICogQHBhcmFtICR0YXJnZXRcbiAgICAgKiBAcGFyYW0gcGxhY2Vob2xkZXJcbiAgICAgKiBAcGFyYW0gZGF0YVxuICAgICAqL1xuICAgIHJlbmRlclNlYXJjaEl0ZW1zKCR0YXJnZXQsIHBsYWNlaG9sZGVyLCBkYXRhKSB7XG4gICAgICAgIGxldCBfdGVtcGxhdGUgPSBgPG9wdGlvbiB2YWx1ZT1cIlwiPiR7cGxhY2Vob2xkZXJ9PC9vcHRpb24+YDtcbiAgICAgICAgJC5lYWNoKGRhdGEsIGZ1bmN0aW9uIChpLCBmKSB7XG4gICAgICAgICAgICBfdGVtcGxhdGUgKz0gYDxvcHRpb24gdmFsdWU9XCIke2Z9XCI+JHtmfTwvb3B0aW9uPmA7XG4gICAgICAgIH0pO1xuICAgICAgICAkdGFyZ2V0Lmh0bWwoX3RlbXBsYXRlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbXB0eSBjaGVjayB1dGlsXG4gICAgICogQHBhcmFtIGRhdGFcbiAgICAgKiBAcGFyYW0gdGVtcGxhdGVcbiAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgKi9cbiAgICB0ZW1wbGF0ZUVtcHR5Q2hlY2soZGF0YSwgdGVtcGxhdGUpIHtcbiAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXBwIGNhcmQgdGVtcGxhdGVcbiAgICAgKiBAcGFyYW0gZGF0YVxuICAgICAqIEByZXR1cm5zIHtIVE1MfVxuICAgICAqL1xuICAgIGFwcENhcmRUZW1wbGF0ZShkYXRhKSB7XG4gICAgICAgIGxldCBfdGVtcGxhdGUgPSAnJyxcbiAgICAgICAgICAgIHNlbGYgPSB0aGlzO1xuICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCkge1xuICAgICAgICAgICAgJC5lYWNoKGRhdGEsIGZ1bmN0aW9uIChpLCBmKSB7XG4gICAgICAgICAgICAgICAgX3RlbXBsYXRlICs9IGA8ZGl2IGNsYXNzPVwiY29sLXhzLTEyIGNvbC1tZC02IG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7Zi5hcHBseWlua31cIiBjbGFzcz1cImpvYi1jYXJkX19ib3ggYmctd2hpdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJqb2ItY2FyZF9fYm94LS10aXRsZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7c2VsZi50ZW1wbGF0ZUVtcHR5Q2hlY2soZi50aXRsZSwgYDxoNCBjbGFzcz1cImZsb2F0LWxlZnRcIj4ke2YudGl0bGV9PC9oND5gKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3NlbGYudGVtcGxhdGVFbXB0eUNoZWNrKGYuc2FsYXJ5LCBgPGxhYmVsIGNsYXNzPVwiYmFkZ2UgYmFkZ2UtbGlnaHRcIj4ke2Yuc2FsYXJ5fTwvbGFiZWw+YCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtzZWxmLnRlbXBsYXRlRW1wdHlDaGVjayhmLnR5cGUsIGA8c3BhbiBjbGFzcz1cImJhZGdlIGJhZGdlLWxpZ2h0XCI+JHtmLnR5cGV9PC9zcGFuPmApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiam9iLWNhcmRfX2JveC0tY29tcGFueVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7c2VsZi50ZW1wbGF0ZUVtcHR5Q2hlY2soZi5jb21wYW55bmFtZSwgYDxsYWJlbD48aW1nIHNyYz1cImFzc2V0cy9pbWcvdGhyZWUtYnVpbGRpbmdzLnN2Z1wiIGFsdD1cIk9mZmljZVwiPiAke2YuY29tcGFueW5hbWV9PC9sYWJlbD5gKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3NlbGYudGVtcGxhdGVFbXB0eUNoZWNrKGYubG9jYXRpb24sIGA8bGFiZWw+PGltZyBzcmM9XCJhc3NldHMvaW1nL2xvY2F0aW9uLXBvaW50ZXIuc3ZnXCIgYWx0PVwiT2ZmaWNlXCI+ICR7Zi5sb2NhdGlvbn08L2xhYmVsPmApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiam9iLWNhcmRfX2JveC0tZGF0ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7c2VsZi50ZW1wbGF0ZUVtcHR5Q2hlY2soZi5zYWxhcnksIGA8bGFiZWw+U3RhcnQ6IDxzcGFuPiR7Zi5zdGFydGRhdGV9PC9zcGFuPjwvbGFiZWw+IC1gKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3NlbGYudGVtcGxhdGVFbXB0eUNoZWNrKGYuc2FsYXJ5LCBgPGxhYmVsPkVuZDogPHNwYW4+JHtmLnN0YXJ0ZGF0ZX08L3NwYW4+PC9sYWJlbD5gKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImpvYi1jYXJkX19ib3gtLW90aGVyc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7c2VsZi50ZW1wbGF0ZUVtcHR5Q2hlY2soZi5zYWxhcnksIGA8bGFiZWw+U291cmNlOiAke2Yuc291cmNlfTwvbGFiZWw+YCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBocmVmPVwiJHtmLmFwcGx5aW5rfVwiIHRpdGxlPVwiQXBwbHlcIiBjbGFzcz1cImJ0biBidG4tc20gYnRuLXN1Y2Nlc3MgZmxvYXQtcmlnaHRcIj5BcHBseTwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfdGVtcGxhdGUgKz0gYDxkaXYgY2xhc3M9XCJjb2wteHMtMTIgY29sLW1kLTEyIHRleHQtY2VudGVyIG1iLTNcIj48aDQ+Tm8gSm9icyBGb3VuZCE8L2g0PjwvZGl2PmA7XG4gICAgICAgIH1cblxuICAgICAgICAkKFwiLmpvYi1jYXJkX19yZXN1bHRzXCIpLmVtcHR5KCkuaHRtbChfdGVtcGxhdGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbmQgYW4gaXRlbSBpbiBBcnJheVxuICAgICAqIEBwYXJhbSBhcnJcbiAgICAgKiBAcGFyYW0gdGVybVxuICAgICAqIEByZXR1cm5zIHtBcnJheX1cbiAgICAgKi9cbiAgICBmaW5kSXRlbShhcnIsIHRlcm0pIHtcbiAgICAgICAgdmFyIGl0ZW1zID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IGFycltpXTtcbiAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gaXRlbSkge1xuICAgICAgICAgICAgICAgIHZhciBkZXRhaWwgPSBpdGVtW3Byb3BdLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoZGV0YWlsLmluZGV4T2YodGVybSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogSm9iIFNlYXJjaCBCYXNlZCB1c2VyIGlucHV0c1xuICAgICAqIEBwYXJhbSBleHBlcmllbmNlXG4gICAgICogQHBhcmFtIGxvY2F0aW9uXG4gICAgICogQHBhcmFtIHNlcmFjaFRlcm1cbiAgICAgKi9cbiAgICBqb2JTZWFyY2goZXhwZXJpZW5jZSwgbG9jYXRpb24sIHNlcmFjaFRlcm0pIHtcbiAgICAgICAgbGV0IHNlbGYgPSB0aGlzLFxuICAgICAgICAgICAgYXBwU3RvcmUgPSB0aGlzLmFwcFN0b3JlLFxuICAgICAgICAgICAgcmVzdWx0ID0gW107XG4gICAgICAgIHRoaXMuc2VhcmNoUmV1bHQgPSBbXTtcblxuICAgICAgICBpZiAoZXhwZXJpZW5jZSAmJiByZXN1bHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmZpbHRlcihmdW5jdGlvbiAoam9iKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGpvYi5leHBlcmllbmNlID09IGV4cGVyaWVuY2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChleHBlcmllbmNlKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBhcHBTdG9yZS5maWx0ZXIoZnVuY3Rpb24gKGpvYikge1xuICAgICAgICAgICAgICAgIHJldHVybiBqb2IuZXhwZXJpZW5jZSA9PSBleHBlcmllbmNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDAgJiYgbG9jYXRpb24pIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5maWx0ZXIoZnVuY3Rpb24gKGpvYikge1xuICAgICAgICAgICAgICAgIHJldHVybiBqb2IubG9jYXRpb24gPT0gbG9jYXRpb247XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChsb2NhdGlvbikge1xuICAgICAgICAgICAgcmVzdWx0ID0gYXBwU3RvcmUuZmlsdGVyKGZ1bmN0aW9uIChqb2IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gam9iLmxvY2F0aW9uID09IGxvY2F0aW9uO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCAmJiBzZXJhY2hUZXJtKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBzZWxmLmZpbmRJdGVtKHJlc3VsdCwgc2VyYWNoVGVybSk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gc2VsZi5maW5kSXRlbShhcHBTdG9yZSwgc2VyYWNoVGVybSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNlYXJjaFJldWx0ID0gcmVzdWx0O1xuICAgICAgICBzZWxmLnJlbmRlckpvYlNlYXJjaFJlc3VsdChyZXN1bHQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGwgcmVuZGVyIGpvYiBjYXJkXG4gICAgICogQHBhcmFtIGRhdGFcbiAgICAgKi9cbiAgICByZW5kZXJKb2JTZWFyY2hSZXN1bHQoZGF0YSkge1xuICAgICAgICB0aGlzLiRlbC5maW5kKCcjanMtdG90YWwtcmVzdWx0JykuaHRtbChkYXRhLmxlbmd0aCk7XG4gICAgICAgIHRoaXMuYXBwQ2FyZFRlbXBsYXRlKGRhdGEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNvcnRpbmcgc2VhcmNoIHJlc3VsdFxuICAgICAqIEBwYXJhbSB0eXBlXG4gICAgICovXG4gICAgam9iU29ydGluZyh0eXBlKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSAodGhpcy5zZWFyY2hSZXVsdCAmJiB0aGlzLnNlYXJjaFJldWx0Lmxlbmd0aCkgPyB0aGlzLnNlYXJjaFJldWx0IDogdGhpcy5hcHBTdG9yZTtcbiAgICAgICAgaWYgKHR5cGUgPT0gJ2xvY2F0aW9uJykge1xuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnNvcnQoKGEsIGIpID0+IGEubG9jYXRpb24gIT09IGIubG9jYXRpb24gPyBhLmxvY2F0aW9uIDwgYi5sb2NhdGlvbiA/IC0xIDogMSA6IDApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGUgPT0gJ2V4cGVyaWVuY2UnKSB7XG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuc29ydCgoYSwgYikgPT4gcGFyc2VJbnQoYS5leHBlcmllbmNlKSAtIHBhcnNlSW50KGIuZXhwZXJpZW5jZSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZW5kZXJKb2JTZWFyY2hSZXN1bHQocmVzdWx0KTtcbiAgICB9XG59XG5cbm5ldyBKb2JTZWFyY2hBcHAoKVxuIl0sInNvdXJjZVJvb3QiOiIifQ==